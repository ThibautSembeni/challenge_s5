---
- hosts: all
  tasks:
    - name: Clone a github repository
      git:
        repo: https://github.com/ThibautSembeni/challenge_s5.git
        dest: ~/app
        clone: yes
        update: yes
        force: yes
    - name: install pip docker
      import_tasks: docker/docker-pip.yml
      become: yes

- hosts: all
  name: Run using a project directory
  tasks:
    - name: Create and pull compose services
      community.docker.docker_compose:
        project_src: app
        files: docker-compose.prod.yml
        pull: true
        state: present
      register: output